<?xml version="1.0" encoding="UTF-8"?>
<!-- ***************************************************************************
* Copyright (c) 2013 École Polytechnique de Montréal
*
* All rights reserved. This program and the accompanying materials are
* made available under the terms of the Eclipse Public License v1.0 which
* accompanies this distribution, and is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* Contributors:
*     Florian Wininger - Initial API and implementation
*************************************************************************** -->
<tmfxml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="xmlDefinition.xsd">

    <timeGraphView id="org.eclipse.linuxtools.tmf.analysis.xml.ui.views.statesystem.fsm">
        <head>
            <analysis id="kernel.linux.pattern.from.fsm" />
            <label value="Xml Sample Kernel View CPU Status from FSM" />
        </head>
        <!-- StateValues -->
        <definedValue name="CPU_STATUS_IDLE" value="0" color="#CCCCCC"/>
        <definedValue name="CPU_STATUS_RUN_USERMODE" value="1" color="#118811" />
        <definedValue name="CPU_STATUS_RUN_SYSCALL" value="2" color="#0000EE" />
        <definedValue name="CPU_STATUS_IRQ" value="3" color="#DDDD00" />
        <definedValue name="CPU_STATUS_SOFTIRQ" value="4" color="#FF8C00" />

        <definedValue name="PROCESS_STATUS_UNKNOWN" value="10" color="D3D3D3" />
        <definedValue name="PROCESS_STATUS_WAIT_BLOCKED" value="11" color="#696969" />
        <definedValue name="PROCESS_STATUS_RUN_USERMODE" value="12" color="#118811" />
        <definedValue name="PROCESS_STATUS_RUN_SYSCALL" value="13" color="#0000EE" />
        <definedValue name="PROCESS_STATUS_INTERRUPTED" value="14" color="#DDDD00" />
        <definedValue name="PROCESS_STATUS_WAIT_FOR_CPU" value="15" color="#A9A9A9" />

        <!-- Control Flow View -->
        <entry path="CPUs/*">
            <display type="constant" value="Status" />
        </entry>
        <entry path="Threads">
            <display type="self" />
            <entry path="*">
                <display type="constant" value="Status" />
                <parent type="constant" value="PPID" />
                <name type="constant" value="Exec_name" />
            </entry>
        </entry>
    </timeGraphView>

    <xyView id="org.eclipse.linuxtools.tmf.analysis.xml.core.tests.xy.pattern.fsm">
        <head>
            <analysis id="kernel.linux.pattern.from.fsm" />
            <label value="Xml XY view CPU Status" />
        </head>

        <entry path="CPUs/*">
            <display type="constant" value="Status" />
            <name type="self" />
        </entry>
    </xyView>


    <pattern id="kernel.linux.pattern.from.fsm" version="0">
        <head>
            <traceType id="org.eclipse.linuxtools.lttng2.kernel.tracetype" />
            <label value="Xml kernel State System Pattern from FSM" />
        </head>

        <definedValue name="CPU_STATUS_IDLE" value="0" />
        <definedValue name="CPU_STATUS_RUN_USERMODE" value="1" />
        <definedValue name="CPU_STATUS_RUN_SYSCALL" value="2" />
        <definedValue name="CPU_STATUS_IRQ" value="3" />
        <definedValue name="CPU_STATUS_SOFTIRQ" value="4" />

        <definedValue name="PROCESS_STATUS_UNKNOWN" value="10" />
        <definedValue name="PROCESS_STATUS_WAIT_BLOCKED" value="11" />
        <definedValue name="PROCESS_STATUS_RUN_USERMODE" value="12" />
        <definedValue name="PROCESS_STATUS_RUN_SYSCALL" value="13" />
        <definedValue name="PROCESS_STATUS_INTERRUPTED" value="14" />
        <definedValue name="PROCESS_STATUS_WAIT_FOR_CPU" value="15" />

        <definedValue name="SOFT_IRQ_RAISED" value="-2" />

        <!-- Shortcut Variables -->
        <location id="CurrentThread">
            <stateAttribute type="constant" value="Threads" />
            <stateAttribute type="query">
                <stateAttribute type="constant" value="CPUs" />
                <stateAttribute type="eventField" value="cpu" />
                <stateAttribute type="constant" value="Current_thread" />
            </stateAttribute>
        </location>
        <location id="CurrentCPU">
            <stateAttribute type="constant" value="CPUs" />
            <stateAttribute type="eventField" value="cpu" />
        </location>
        <location id="CurrentIRQ">
            <stateAttribute type="constant" value="Resources"/>
            <stateAttribute type="constant" value="IRQs"/>
            <stateAttribute type="eventField" value="irq"/>
        </location>
        <location id="CurrentSoftIRQ">
            <stateAttribute type="constant" value="Resources" />
            <stateAttribute type="constant" value="Soft_IRQs" />
            <stateAttribute type="eventField" value="vec" />
        </location>
        <location id="newCurrentThread">
            <stateAttribute type="constant" value="Threads" />
            <stateAttribute type="eventField" value="next_tid" />
        </location>

        <patternHandler>

            <!-- CPU status update actions -->

            <action id="update_cpu_to_idle">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$CPU_STATUS_IDLE" />
                </stateChange>
            </action>

            <action id="update_cpu_to_usermode">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$CPU_STATUS_RUN_USERMODE" />
                </stateChange>
            </action>

            <action id="update_cpu_to_syscall">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$CPU_STATUS_RUN_SYSCALL" />
                </stateChange>
            </action>

            <action id="update_cpu_to_irq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$CPU_STATUS_IRQ" />
                </stateChange>
            </action>

            <action id="update_cpu_to_softirq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$CPU_STATUS_SOFTIRQ" />
                </stateChange>
            </action>

            <!-- Process status update actions -->

            <action id="update_process_to_unknown">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_UNKNOWN" />
                </stateChange>
            </action>

            <action id="update_process_to_wait_blocked">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_BLOCKED" />
                </stateChange>
            </action>

            <action id="update_process_to_usermode">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_RUN_USERMODE" />
                </stateChange>
            </action>

            <action id="update_process_to_syscall">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_RUN_SYSCALL" />
                </stateChange>
            </action>

            <action id="update_process_to_interrupted">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_INTERRUPTED" />
                </stateChange>
            </action>

            <action id="update_process_to_wait_cpu">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_FOR_CPU" />
                </stateChange>
            </action>

            <action id="update_prev_process_to_wait_cpu">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="prev_tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_FOR_CPU" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="wait_cpu" />
                </stateChange> -->
            </action>

            <action id="update_prev_process_to_wait_blocked">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="prev_tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_BLOCKED" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="wait_blocked" />
                </stateChange> -->
            </action>

            <action id="update_new_process_to_usermode">
                <stateChange>
                    <stateAttribute type="location" value="newCurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_RUN_USERMODE" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="usermode" />
                </stateChange> -->
            </action>

            <action id="update_new_process_to_syscall">
                <stateChange>
                    <stateAttribute type="location" value="newCurrentThread" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_RUN_SYSCALL" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="syscall" />
                </stateChange> -->
            </action>

            <action id="update_child_process_to_wait_cpu">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="child_tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_FOR_CPU" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="wait_cpu" />
                </stateChange> -->
            </action>

            <action id="update_process_from_tid_to_wait_cpu">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_FOR_CPU" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="wait_cpu" />
                </stateChange> -->
            </action>

            <action id="update_process_from_tid_to_wait_blocked">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_WAIT_BLOCKED" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="wait_blocked" />
                </stateChange> -->
            </action>

            <action id="update_process_from_tid_to_unknown">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateAttribute type="constant" value="Status" />
                    <stateValue type="int" value="$PROCESS_STATUS_UNKNOWN" />
                </stateChange>
                <!-- <stateChange>
                    <stateAttribute type="constant" value="scenarios" />
                    <stateAttribute type="constant" value="process_fsm" />
                    <stateAttribute type="constant" value="" />
                    <stateAttribute type="constant" value="state" />
                    <stateValue type="string" value="unknown" />
                </stateChange> -->
            </action>

            <!-- IRQ update actions -->

            <action id="update_irq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentIRQ" />
                    <stateValue type="eventField" value="cpu" />
                </stateChange>
            </action>

            <action id="update_no_irq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentIRQ" />
                    <stateValue type="null" />
                </stateChange>
            </action>

            <!-- SoftIRQ update actions -->

            <action id="update_softirq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentSoftIRQ" />
                    <stateValue type="eventField" value="cpu" />
                </stateChange>
            </action>

            <action id="update_softirq_raised">
                <stateChange>
                    <stateAttribute type="location" value="CurrentSoftIRQ" />
                    <stateValue type="int" value="$SOFT_IRQ_RAISED" />
                </stateChange>
            </action>

            <action id="update_no_softirq">
                <stateChange>
                    <stateAttribute type="location" value="CurrentSoftIRQ" />
                    <stateValue type="null" />
                </stateChange>
            </action>

            <!-- Other actions -->

            <action id="set_current_thread_system_call_null">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="System_call" />
                    <stateValue type="null" />
                </stateChange>
            </action>

            <action id="set_current_cpu_current_thread_next_tid">
                <stateChange>
                    <stateAttribute type="location" value="CurrentCPU" />
                    <stateAttribute type="constant" value="Current_thread" />
                    <stateValue type="eventField" value="next_tid" forcedType="int" />
                </stateChange>
            </action>

            <action id="set_child_thread_system_call_parent_thread_system_call">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="child_tid" />
                    <stateAttribute type="constant" value="System_call" />
                    <stateValue type="query">
                        <stateAttribute type="constant" value="Threads" />
                        <stateAttribute type="eventField" value="parent_tid" />
                        <stateAttribute type="constant" value="System_call" />
                    </stateValue>
                </stateChange>
            </action>

            <action id="set_child_thread_system_call_sys_clone">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="child_tid" />
                    <stateAttribute type="constant" value="System_call" />
                    <stateValue type="string" value="sys_clone" />
                </stateChange>
            </action>

            <action id="set_current_thread_system_call_eventname">
                <stateChange>
                    <stateAttribute type="location" value="CurrentThread" />
                    <stateAttribute type="constant" value="System_call" />
                    <stateValue type="eventName" />
                </stateChange>
            </action>

            <action id="set_new_current_thread_exec_name_next_comm">
                <stateChange>
                    <stateAttribute type="location" value="newCurrentThread" />
                    <stateAttribute type="constant" value="Exec_name" />
                    <stateValue type="eventField" value="next_comm" />
                </stateChange>
            </action>

            <action id="set_child_thread_ppid">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="child_tid" />
                    <stateAttribute type="constant" value="PPID" />
                    <stateValue type="eventField" value="parent_tid" forcedType="int" />
                </stateChange>
            </action>

            <action id="set_child_thread_exec_name">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="child_tid" />
                    <stateAttribute type="constant" value="Exec_name" />
                    <stateValue type="eventField" value="child_comm" />
                </stateChange>
            </action>

            <action id="free_process">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateValue type="delete" />
                </stateChange>
            </action>

            <action id="set_thread_exec_name">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateAttribute type="constant" value="Exec_name" />
                    <stateValue type="eventField" value="name" />
                </stateChange>
            </action>

            <action id="set_thread_ppid">
                <stateChange>
                    <stateAttribute type="constant" value="Threads" />
                    <stateAttribute type="eventField" value="tid" />
                    <stateAttribute type="constant" value="PPID" />
                    <stateValue type="eventField" value="ppid" forcedType="int" />
                </stateChange>
            </action>

            <!-- Conditions -->

            <test id="current_thread_system_call_null">
                <if>
                    <condition>
                        <stateAttribute type="location" value="CurrentThread" />
                        <stateAttribute type="constant" value="System_call" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="current_thread_system_call_not_null">
                <if>
                    <not>
                        <condition>
                            <stateAttribute type="location" value="CurrentThread" />
                            <stateAttribute type="constant" value="System_call" />
                            <stateValue type="null" />
                        </condition>
                    </not>
                </if>
            </test>

            <test id="new_current_thread_system_call_null">
                <if>
                    <condition>
                        <stateAttribute type="location" value="newCurrentThread" />
                        <stateAttribute type="constant" value="System_call" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="new_current_thread_system_call_not_null">
                <if>
                    <not>
                        <condition>
                            <stateAttribute type="location" value="newCurrentThread" />
                            <stateAttribute type="constant" value="System_call" />
                            <stateValue type="null" />
                        </condition>
                    </not>
                </if>
            </test>

            <test id="new_current_thread_system_call_not_null_and_next_tid_not_0">
                <if>
                    <and>
                        <not>
                            <condition>
                                <stateAttribute type="location" value="newCurrentThread" />
                                <stateAttribute type="constant" value="System_call" />
                                <stateValue type="null" />
                            </condition>
                        </not>
                        <not>
                            <condition>
                                <field name="next_tid" />
                                <stateValue type="long" value="0" />
                            </condition>
                        </not>
                    </and>
                </if>
            </test>

            <test id="new_current_thread_system_call_null_and_next_tid_not_0">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="location" value="newCurrentThread" />
                            <stateAttribute type="constant" value="System_call" />
                            <stateValue type="null" />
                        </condition>
                        <not>
                            <condition>
                                <field name="next_tid" />
                                <stateValue type="long" value="0" />
                            </condition>
                        </not>
                    </and>
                </if>
            </test>

            <test id="current_cpu_current_thread_null">
                <if>
                    <condition>
                        <stateAttribute type="location" value="CurrentCPU" />
                        <stateAttribute type="constant" value="Current_thread" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="current_cpu_current_thread_0">
                <if>
                    <condition>
                        <stateAttribute type="location" value="CurrentCPU" />
                        <stateAttribute type="constant" value="Current_thread" />
                        <stateValue type="int" value="0" />
                    </condition>
                </if>
            </test>

            <test id="child_thread_system_call_null">
                <if>
                    <condition>
                        <stateAttribute type="constant" value="Threads" />
                        <stateAttribute type="eventField" value="child_tid" />
                        <stateAttribute type="constant" value="System_call" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="test_for_wait_blocked_process_state">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="Status" />
                            <stateValue type="null" />
                        </condition>
                        <condition>
                            <field name="status" />
                            <stateValue type="long" value="5" />
                        </condition>
                    </and>
                </if>
            </test>

            <test id="wait_blocked_process_state_and_thread_exec_name_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="Exec_name" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="null" />
                            </condition>
                            <condition>
                                <field name="status" />
                                <stateValue type="long" value="5" />
                            </condition>
                        </and>
                    </and>
                </if>
            </test>

            <test id="wait_blocked_process_state_and_thread_ppid_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="PPID" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="null" />
                            </condition>
                            <condition>
                                <field name="status" />
                                <stateValue type="long" value="5" />
                            </condition>
                        </and>
                    </and>
                </if>
            </test>

            <test id="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="PPID" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Exec_name" />
                                <stateValue type="null" />
                            </condition>
                            <and>
                                <condition>
                                    <stateAttribute type="constant" value="Threads" />
                                    <stateAttribute type="eventField" value="tid" />
                                    <stateAttribute type="constant" value="Status" />
                                    <stateValue type="null" />
                                </condition>
                                <condition>
                                    <field name="status" />
                                    <stateValue type="long" value="5" />
                                </condition>
                            </and>
                        </and>
                    </and>
                </if>
            </test>

            <test id="test_for_wait_cpu_process_state">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="Status" />
                            <stateValue type="null" />
                        </condition>
                        <condition>
                            <field name="status" />
                            <stateValue type="long" value="2" />
                        </condition>
                    </and>
                </if>
            </test>

            <test id="wait_cpu_process_state_and_thread_exec_name_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="Exec_name" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="null" />
                            </condition>
                            <condition>
                                <field name="status" />
                                <stateValue type="long" value="2" />
                            </condition>
                        </and>
                    </and>
                </if>
            </test>

            <test id="wait_cpu_process_state_and_thread_ppid_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="PPID" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="null" />
                            </condition>
                            <condition>
                                <field name="status" />
                                <stateValue type="long" value="2" />
                            </condition>
                        </and>
                    </and>
                </if>
            </test>

            <test id="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null">
                <if>
                    <and>
                        <condition>
                            <stateAttribute type="constant" value="Threads" />
                            <stateAttribute type="eventField" value="tid" />
                            <stateAttribute type="constant" value="PPID" />
                            <stateValue type="null" />
                        </condition>
                        <and>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Exec_name" />
                                <stateValue type="null" />
                            </condition>
                            <and>
                                <condition>
                                    <stateAttribute type="constant" value="Threads" />
                                    <stateAttribute type="eventField" value="tid" />
                                    <stateAttribute type="constant" value="Status" />
                                    <stateValue type="null" />
                                </condition>
                                <condition>
                                    <field name="status" />
                                    <stateValue type="long" value="2" />
                                </condition>
                            </and>
                        </and>
                    </and>
                </if>
            </test>

            <test id="test_for_sched_wakeup">
                <if>
                    <and>
                        <not>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="int" value="$PROCESS_STATUS_RUN_USERMODE" />
                            </condition>
                        </not>
                        <not>
                            <condition>
                                <stateAttribute type="constant" value="Threads" />
                                <stateAttribute type="eventField" value="tid" />
                                <stateAttribute type="constant" value="Status" />
                                <stateValue type="int" value="$PROCESS_STATUS_RUN_SYSCALL" />
                            </condition>
                        </not>
                    </and>
                </if>
            </test>

            <test id="thread_exec_name_null">
                <if>
                    <condition>
                        <stateAttribute type="constant" value="Threads" />
                        <stateAttribute type="eventField" value="tid" />
                        <stateAttribute type="constant" value="Exec_name" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="thread_ppid_null">
                <if>
                    <condition>
                        <stateAttribute type="constant" value="Threads" />
                        <stateAttribute type="eventField" value="tid" />
                        <stateAttribute type="constant" value="PPID" />
                        <stateValue type="null" />
                    </condition>
                </if>
            </test>

            <test id="prev_state_0">
                <if>
                    <condition>
                        <field name="prev_state" />
                        <stateValue type="long" value="0" />
                    </condition>
                </if>
            </test>

            <test id="prev_state_not_0">
                <if>
                    <not>
                        <condition>
                            <field name="prev_state" />
                            <stateValue type="long" value="0" />
                        </condition>
                    </not>
                </if>
            </test>

            <test id="next_tid_0">
                <if>
                    <condition>
                        <field name="next_tid" />
                        <stateValue type="long" value="0" />
                    </condition>
                </if>
            </test>


            <fsm id="cpu_fsm" initial="idle">
                <state id="idle">
                    <transition event="irq_handler_entry" target="irq" action="update_cpu_to_irq" />
                    <transition event="softirq_entry" target="irq" action="update_cpu_to_softirq" />
                    <transition event="sched_switch" target="syscall" action="update_cpu_to_syscall:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_not_null_and_next_tid_not_0"/>
                    <transition event="sched_switch" target="usermode" action="update_cpu_to_usermode:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_null_and_next_tid_not_0"/>
                    <transition event="sched_switch" target="idle" cond="next_tid_0" action="update_cpu_to_idle:set_current_cpu_current_thread_next_tid" />
                </state>
                <state id="usermode">
                    <transition event="irq_handler_entry" target="irq" action="update_cpu_to_irq" />
                    <transition event="softirq_entry" target="irq" action="update_cpu_to_softirq" />
                    <transition event="sched_switch" target="syscall" action="update_cpu_to_syscall:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_not_null_and_next_tid_not_0"/>
                    <transition event="sys_*" target="syscall" action="update_cpu_to_syscall" />
                    <transition event="compat_sys_*" target="syscall" action="update_cpu_to_syscall" />
                    <transition event="syscall_entry_*" target="syscall" action="update_cpu_to_syscall" />
                    <transition event="sched_switch" target="idle" cond="next_tid_0" action="update_cpu_to_idle:set_current_cpu_current_thread_next_tid" />
                    <transition event="sched_switch" target="usermode" action="update_cpu_to_usermode:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_null_and_next_tid_not_0"/>
                </state>
                <state id="syscall">
                    <transition event="exit_syscall" target="usermode" action="update_cpu_to_usermode" />
                    <transition event="syscall_exit_*" target="usermode" action="update_cpu_to_usermode" />
                    <transition event="sched_switch" target="usermode" action="update_cpu_to_usermode:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_null_and_next_tid_not_0"/>
                    <transition event="sched_switch" target="idle" cond="next_tid_0" action="update_cpu_to_idle:set_current_cpu_current_thread_next_tid" />
                    <transition event="sched_switch" target="syscall" action="update_cpu_to_syscall:set_current_cpu_current_thread_next_tid" cond="new_current_thread_system_call_not_null_and_next_tid_not_0"/>
                </state>
                <state id="irq">
                    <transition event="irq_handler_exit" target="idle" action="update_cpu_to_idle" cond="current_cpu_current_thread_null" />
                    <transition event="irq_handler_exit" target="idle" action="update_cpu_to_idle" cond="current_cpu_current_thread_0" />
                    <transition event="irq_handler_exit" target="usermode" action="update_cpu_to_usermode" cond="current_thread_system_call_null" />
                    <transition event="irq_handler_exit" target="syscall" action="update_cpu_to_syscall" cond="current_thread_system_call_not_null" />
                </state>
                <state id="softirq">
                    <transition event="softirq_exit" target="idle" action="update_cpu_to_idle" cond="current_cpu_current_thread_null" />
                    <transition event="softirq_exit" target="idle" action="update_cpu_to_idle" cond="current_cpu_current_thread_0" />
                    <transition event="softirq_exit" target="usermode" action="update_cpu_to_usermode" cond="current_thread_system_call_null" />
                    <transition event="softirq_exit" target="syscall" action="update_cpu_to_syscall" cond="current_thread_system_call_not_null" />
                </state>
            </fsm>

            <fsm id="process_fsm" initial="unknown">
                <state id="unknown">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="unknown" action="update_process_from_tid_to_unknown" />

                    <transition event="irq_handler_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="softirq_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="sched_process_free" target="unknown" action="free_process" />
                    <transition event="sched_wakeup*" target="unknown" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                </state>
                <state id="wait_blocked">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="wait_blocked" action="update_process_from_tid_to_unknown" />

                    <transition event="irq_handler_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="softirq_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="sched_process_free" target="wait_blocked" action="free_process" />
                    <transition event="sched_wakeup*" target="wait_blocked" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                </state>
                <state id="usermode">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="unknusermodeown" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="usermode" action="update_process_from_tid_to_unknown" />

                    <transition event="irq_handler_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="softirq_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="sched_process_fork" target="usermode" action="update_child_process_to_wait_cpu:set_child_thread_ppid:set_child_thread_exec_name:set_child_thread_system_call_parent_thread_system_call:set_child_thread_system_call_sys_clone" cond="child_thread_system_call_null" />
                    <transition event="sched_process_fork" target="usermode" action="update_child_process_to_wait_cpu:set_child_thread_ppid:set_child_thread_exec_name:set_child_thread_system_call_parent_thread_system_call" />
                    <transition event="sys_*" target="syscall" action="update_process_to_syscall:set_current_thread_system_call_eventname" />
                    <transition event="syscall_entry_*" target="syscall" action="update_process_to_syscall:set_current_thread_system_call_eventname" />
                    <transition event="compat_sys_*" target="syscall" action="update_process_to_syscall:set_current_thread_system_call_eventname" />
                    <transition event="sched_process_free" target="usermode" action="free_process" />
                    <transition event="sched_switch" target="usermode" action="update_new_process_to_syscall:set_new_current_thread_exec_name_next_comm" cond="new_current_thread_system_call_not_null" />
                    <transition event="sched_switch" target="usermode" action="update_prev_process_to_wait_cpu:set_new_current_thread_exec_name_next_comm" cond="prev_state_0" /> <!-- stay in the same state because it's the prev process that is being updated -->
                    <transition event="sched_switch" target="usermode" action="update_prev_process_to_wait_blocked:set_new_current_thread_exec_name_next_comm" cond="prev_state_not_0" />
                    <transition event="sched_wakeup*" target="usermode" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                </state>
                <state id="syscall">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="syscall" action="update_process_from_tid_to_unknown" />

                    <transition event="exit_syscall" target="usermode" action="update_process_to_usermode:set_current_thread_system_call_null" />
                    <transition event="syscall_exit_*" target="usermode" action="update_process_to_usermode:set_current_thread_system_call_null" />
                    <transition event="sched_process_free" target="syscall" action="free_process" />
                    <transition event="sched_switch" target="syscall" action="update_new_process_to_usermode:set_new_current_thread_exec_name_next_comm" cond="new_current_thread_system_call_null" />
                    <transition event="sched_switch" target="syscall" action="update_prev_process_to_wait_cpu:set_new_current_thread_exec_name_next_comm" cond="prev_state_0" />
                    <transition event="sched_switch" target="syscall" action="update_prev_process_to_wait_blocked:set_new_current_thread_exec_name_next_comm" cond="prev_state_not_0" />
                    <transition event="sched_wakeup*" target="syscall" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                </state>
                <state id="interrupted">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="interrupted" action="update_process_from_tid_to_unknown" />

                    <transition event="sched_wakeup*" target="interrupted" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                    <transition event="softirq_exit" target="usermode" action="update_process_to_usermode" cond="current_thread_system_call_null" />
                    <transition event="irq_handler_exit" target="usermode" action="update_process_to_usermode" cond="current_thread_system_call_null" />
                    <transition event="softirq_exit" target="syscall" action="update_process_to_syscall" cond="current_thread_system_call_not_null" />
                    <transition event="irq_handler_exit" target="syscall" action="update_process_to_syscall" cond="current_thread_system_call_not_null" />
                    <transition event="sched_process_free" target="interrupted" action="free_process" />
                </state>
                <state id="wait_cpu">
                    <!-- WARNING: transitions order is important -->
                        <!-- lttng_statedump_process_state transitions to wait_blocked -->
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name:set_thread_ppid" cond="wait_blocked_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_blocked:set_thread_exec_name" cond="wait_blocked_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_blocked:set_thread_ppid" cond="wait_blocked_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_blocked" cond="test_for_wait_blocked_process_state" />
                        <!-- lttng_statedump_process_state transitions to wait_cpu -->
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name:set_thread_ppid" cond="wait_cpu_process_state_and_thread_exec_name_null_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_cpu:set_thread_exec_name" cond="wait_cpu_process_state_and_thread_exec_name_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_cpu:set_thread_ppid" cond="wait_cpu_process_state_and_thread_ppid_null" />
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_wait_cpu" cond="test_for_wait_cpu_process_state" />
                        <!-- lttng_statedump_process_state transitions to unknown -->
                    <transition event="lttng_statedump_process_state" target="wait_cpu" action="update_process_from_tid_to_unknown" />

                    <transition event="irq_handler_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="softirq_entry" target="interrupted" action="update_process_to_interrupted" />
                    <transition event="sched_process_free" target="wait_cpu" action="free_process" />
                    <transition event="sched_wakeup*" target="wait_cpu" action="update_process_from_tid_to_wait_cpu" cond="test_for_sched_wakeup" />
                </state>
            </fsm>

            <fsm id="irq_fsm" initial="no_irq">
                <state id="no_irq">
                    <transition event="irq_handler_entry" target="irq" action="update_irq" />
                </state>
                <state id="irq">
                    <transition event="irq_handler_exit" target="no_irq" action="update_no_irq" />
                </state>
            </fsm>

            <fsm id="softirq_fsm" initial="no_softirq">
                <state id="no_softirq">
                    <transition event="softirq_entry" target="softirq" action="update_softirq" />
                    <transition event="softirq_raise" target="softirq" action="update_softirq_raised" />
                </state>
                <state id="softirq">
                    <transition event="softirq_exit" target="no_softirq" action="update_no_softirq" />
                </state>
            </fsm>

        </patternHandler>
    </pattern>
</tmfxml>
